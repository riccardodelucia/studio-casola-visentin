---
import Layout from "../layouts/Layout.astro";

import Hero from "../components/Hero.astro";
import AboutUs from "../components/AboutUs.astro";
import Services from "../components/Services.astro";
import Contacts from "../components/Contacts.astro";
---

<Layout title="Sudio Casola Visentin">
  <main>
    <Hero />
    <AboutUs />
    <Services />
    <Contacts />
  </main>
</Layout>

<script>
  let options = {
    root: null,
    rootMargin: "-80px 0px 0px 0px",
    threshold: [0, 0.25, 0.5, 0.75, 1],
  };

  const header = document.getElementById("header");

  const button = document.getElementById("menu");

  const intersectionCallback = (entries) => {
    entries.forEach((entry) => {
      if (!entry.isIntersecting) {
        header?.style.setProperty(
          "--header-background",
          "var(--header-background-scrolled)",
        );
        header?.style.setProperty(
          "--header-color",
          "var(--header-color-scrolled)",
        );
        button?.style.setProperty(
          "--button-color",
          "var(--text-color-heading)",
        );
      } else {
        header?.style.setProperty(
          "--header-background",
          "var(--header-background-top)",
        );
        header?.style.setProperty("--header-color", "var(--header-color-top)");
        button?.style.setProperty("--button-color", "var(--text-color-white)");
      }
    });
  };

  const observer = new IntersectionObserver(intersectionCallback, options);

  const hero = document.querySelector("#hero");

  observer.observe(hero);
</script>
